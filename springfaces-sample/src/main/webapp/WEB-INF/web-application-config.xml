<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:webflow="http://www.springframework.org/schema/webflow-config"
	xmlns:faces="http://www.springframework.org/schema/faces"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/context
		http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.springframework.org/schema/mvc
		http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
		http://www.springframework.org/schema/webflow-config
        http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
        http://www.springframework.org/schema/faces
        http://www.springframework.org/schema/faces/spring-faces-2.2.xsd">

	<mvc:annotation-driven conversion-service="conversionService"/>

	<bean id="conversionService"
		class="org.springframework.context.support.ConversionServiceFactoryBean">
		<property name="converters">
			<list>
				<bean
					class="org.springframework.springfaces.mvc.converter.GenericFacesConverter" />
			</list>
		</property>
	</bean>

	<context:component-scan
		base-package="org.springframework.springfaces.sample.controller" />

	<webflow:flow-executor id="flowExecutor">
		<webflow:flow-execution-listeners>
			<webflow:listener ref="facesContextListener" />
		</webflow:flow-execution-listeners>
	</webflow:flow-executor>

	<webflow:flow-registry id="flowRegistry"
		flow-builder-services="flowBuilderServices" base-path="/WEB-INF/flows">
		<webflow:flow-location-pattern value="**/*-flow.xml" />
	</webflow:flow-registry>

	<faces:flow-builder-services id="flowBuilderServices" />

	<bean id="facesContextListener"
		class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener" />

	<faces:resources />

	<bean class="org.springframework.faces.webflow.JsfFlowHandlerAdapter">
		<property name="flowExecutor" ref="flowExecutor" />
	</bean>

	<bean id="testBeanView" class="org.springframework.springfaces.sample.controller.TestBeanView"/>

	<bean id="beanNameViewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver">
		<property name="order" value="50"/>
	</bean>

	<bean id="facesViewResolver"
		class="org.springframework.web.servlet.view.UrlBasedViewResolver">
		<property name="viewClass"
			value="org.springframework.springfaces.mvc.view.FacesView" />
		<property name="prefix" value="/WEB-INF/pages/" />
		<property name="suffix" value=".xhtml" />
		<property name="order" value="100" />
	</bean>

	<bean class="org.springframework.springfaces.SpringFacesIntegration" />

	<bean name="stateHandler"
		class="org.springframework.springfaces.mvc.view.ClientFacesViewStateHandler" />

	<bean class="org.springframework.springfaces.mvc.SpringFacesFactories">
		<property name="stateHandler" ref="stateHandler" />
	</bean>

	<bean name="postbackHandler"
		class="org.springframework.springfaces.mvc.servlet.FacesPostbackHandler">
		<property name="stateHandler" ref="stateHandler" />
	</bean>

	<mvc:interceptors>
		<bean name="facesInterceptor"
			class="org.springframework.springfaces.mvc.servlet.FacesHandlerInterceptor">
		</bean>
	</mvc:interceptors>


</beans>